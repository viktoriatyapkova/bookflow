# BookFlow

–°–µ—Ä–≤–µ—Ä–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–∏—á–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π –∏ –æ–Ω–ª–∞–π–Ω-—á—Ç–µ–Ω–∏—è –∫–Ω–∏–≥.

## üéØ –û–ø–∏—Å–∞–Ω–∏–µ

BookFlow - —ç—Ç–æ REST API –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –Ω–∞ FastAPI, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç:

- –£–ø—Ä–∞–≤–ª—è—Ç—å –ª–∏—á–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π –∫–Ω–∏–≥ (–ø—É–±–ª–∏—á–Ω—ã–µ –∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ)
- –î–æ–±–∞–≤–ª—è—Ç—å –∫–Ω–∏–≥–∏ –ø–æ ISBN –±–µ–∑ –∑–∞–≥—Ä—É–∑–∫–∏ PDF (–º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∏–∑ Google Books)
- –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å—ã –∫–Ω–∏–≥ (–∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ, —á–∏—Ç–∞—é, –ø—Ä–æ—á–∏—Ç–∞–Ω–æ)
- –ß–∏—Ç–∞—Ç—å PDF-–∫–Ω–∏–≥–∏ –æ–Ω–ª–∞–π–Ω (streaming)
- –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å —á—Ç–µ–Ω–∏—è –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å —Ü–µ–ª–∏ —á—Ç–µ–Ω–∏—è –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å streak (—Å–µ—Ä–∏–∏ –¥–Ω–µ–π)
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å Google Books API –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∫–Ω–∏–≥
- –ü—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è —á–µ—Ä–µ–∑ RabbitMQ

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –æ—Å–Ω–æ–≤–µ **Clean Architecture (Layered)**:

```
app/
‚îú‚îÄ‚îÄ api/              # FastAPI routers
‚îú‚îÄ‚îÄ application/      # UseCases / Services 
‚îú‚îÄ‚îÄ domain/           # Entities / Value Objects
‚îú‚îÄ‚îÄ infrastructure/  # DB / Storage / External APIs / MQ
‚îî‚îÄ‚îÄ tests/           # –¢–µ—Å—Ç—ã
```

### –ú–æ–¥—É–ª–∏

1. **users** - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (JWT)
2. **books** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–∏–≥–∞–º–∏ (–ø—É–±–ª–∏—á–Ω—ã–µ/–ø—Ä–∏–≤–∞—Ç–Ω—ã–µ)
3. **reading** - –ü—Ä–æ–≥—Ä–µ—Å—Å —á—Ç–µ–Ω–∏—è –∏ –ø—Ä–∏–≤—ã—á–∫–∏
4. **integrations** - Google Books API

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker –∏ Docker Compose
- Python 3.11+ (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

### –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone <repository-url>
cd bookflow
```

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã:
```bash
docker-compose up --build
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:8000

### –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º

- **API**: http://localhost:8000
- **API Docs (Swagger)**: http://localhost:8000/docs
- **RabbitMQ Management**: http://localhost:15672 
- **MinIO Console**: http://localhost:9001 

## üìö API Endpoints

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

- `POST /api/v1/users/register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `POST /api/v1/users/login` - –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- `GET /api/v1/users/me` - –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ö–Ω–∏–≥–∏

- `GET /api/v1/books/public` - –ü–æ–ª—É—á–∏—Ç—å –ø—É–±–ª–∏—á–Ω—ã–µ –∫–Ω–∏–≥–∏
- `POST /api/v1/books/private` - –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω—É—é –∫–Ω–∏–≥—É (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫—É)
- `GET /api/v1/books/{book_id}/read` - –ß–∏—Ç–∞—Ç—å –∫–Ω–∏–≥—É (PDF stream)
- `DELETE /api/v1/books/{book_id}` - –£–¥–∞–ª–∏—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω—É—é –∫–Ω–∏–≥—É

### –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

- `GET /api/v1/users/me/library` - –ü–æ–ª—É—á–∏—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Å —Ñ–∏–ª—å—Ç—Ä–æ–º –ø–æ —Å—Ç–∞—Ç—É—Å—É)
- `POST /api/v1/users/me/library/isbn` - –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–∏–≥—É –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫—É –ø–æ ISBN (–±–µ–∑ PDF)
- `POST /api/v1/users/me/library/public` - –î–æ–±–∞–≤–∏—Ç—å –ø—É–±–ª–∏—á–Ω—É—é –∫–Ω–∏–≥—É –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫—É
- `PUT /api/v1/users/me/library/{book_id}/status` - –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∫–Ω–∏–≥–∏ –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ
- `DELETE /api/v1/users/me/library/{book_id}` - –£–¥–∞–ª–∏—Ç—å –∫–Ω–∏–≥—É –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

**–°—Ç–∞—Ç—É—Å—ã –∫–Ω–∏–≥:**
- `planned` - –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ –∫ –ø—Ä–æ—á—Ç–µ–Ω–∏—é
- `reading` - –ß–∏—Ç–∞—é
- `finished` - –ü—Ä–æ—á–∏—Ç–∞–Ω–æ

### –ü—Ä–æ–≥—Ä–µ—Å—Å —á—Ç–µ–Ω–∏—è

- `PUT /api/v1/reading/progress/{book_id}` - –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å
- `GET /api/v1/reading/progress/{book_id}` - –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å
- `GET /api/v1/reading/habit` - –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–∏–≤—ã—á–∫—É —á—Ç–µ–Ω–∏—è
- `PUT /api/v1/reading/habit` - –û–±–Ω–æ–≤–∏—Ç—å —Ü–µ–ª—å —á—Ç–µ–Ω–∏—è
- `GET /api/v1/reading/stats` - –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

- `GET /api/v1/integrations/google-books/search?query=...` - –ü–æ–∏—Å–∫ –∫–Ω–∏–≥
- `GET /api/v1/integrations/google-books/isbn/{isbn}` - –ü–æ–ª—É—á–∏—Ç—å –∫–Ω–∏–≥—É –ø–æ ISBN

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:

```bash
pytest
```

–° –ø–æ–∫—Ä—ã—Ç–∏–µ–º:

```bash
pytest --cov=app --cov-report=html
```

–¢—Ä–µ–±—É–µ–º–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ: ‚â•30%

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è PostgreSQL. –ú–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —á–µ—Ä–µ–∑ Alembic.

### –¢–∞–±–ª–∏—Ü—ã

- `users` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- `books` - –ö–Ω–∏–≥–∏ (–ø—É–±–ª–∏—á–Ω—ã–µ –∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ, —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π ISBN)
- `user_books` - –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Å—Ç–∞—Ç—É—Å—ã: planned, reading, finished)
- `reading_progress` - –ü—Ä–æ–≥—Ä–µ—Å—Å —á—Ç–µ–Ω–∏—è –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º
- `reading_habits` - –ü—Ä–∏–≤—ã—á–∫–∏ —á—Ç–µ–Ω–∏—è (—Ü–µ–ª–∏ –∏ streak)

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.

–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

- `DATABASE_URL` - URL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL
- `SECRET_KEY` - –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è JWT
- `MINIO_ENDPOINT` - Endpoint MinIO
- `RABBITMQ_URL` - URL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ RabbitMQ
- `GOOGLE_BOOKS_API_URL` - URL Google Books API

## üì¶ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **FastAPI** - Web framework
- **SQLAlchemy** - ORM
- **Alembic** - –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
- **PostgreSQL** - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **MinIO** - –•—Ä–∞–Ω–∏–ª–∏—â–µ —Ñ–∞–π–ª–æ–≤ (S3-compatible)
- **RabbitMQ** - –ë—Ä–æ–∫–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π
- **JWT** - –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- **pytest** - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ



